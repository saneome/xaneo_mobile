# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ Apple Emoji —Å—Ç–∏–∫–µ—Ä–æ–≤

## üìã –û–±–∑–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

–ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è Apple Emoji —Å—Ç–∏–∫–µ—Ä–æ–≤:

### 1. üéØ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–æ–¥–∑–∏ (EmojiUtils)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ EmojiParser –∏ —Å–æ–∑–¥–∞–Ω–∏–µ TextStyle –æ–±—ä–µ–∫—Ç–æ–≤
**–†–µ—à–µ–Ω–∏–µ:** –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```dart
// –ö—ç—à —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —ç–º–æ–¥–∑–∏
static final Map<String, String> _emojiCache = {};

// –ö—ç—à TextStyle –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
static final Map<String, TextStyle> _styleCache = {};

// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —ç–º–æ–¥–∑–∏
static const Map<String, String> _preloadedEmojis = {
  'smile': 'üòä',
  'heart': '‚ù§Ô∏è',
  'fire': 'üî•',
  // ...
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º —ç–º–æ–¥–∑–∏
- üíæ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø–∞–º—è—Ç—å –∑–∞ —Å—á–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TextStyle
- üéÆ –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–º–æ–¥–∑–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 2. üî§ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ (EmojiLoaderService)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ Apple Emoji —à—Ä–∏—Ñ—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞

```dart
// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∞–º—è—Ç—å
static Future<void> preloadAppleEmojiFont() async {
  final ByteData fontData = await rootBundle.load('assets/fonts/appleemojis.ttf');
  _cachedFontData = fontData.buffer.asUint8List();
  await _registerFont();
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üèÉ‚Äç‚ôÇÔ∏è –®—Ä–∏—Ñ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- üß† –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ FontLoader –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Flutter
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏

### 3. ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö RegExp –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
**–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö regex

```dart
static RegExp? _emojiRegex;

static bool hasEmoji(String text) {
  _emojiRegex ??= RegExp(/* pattern */);
  return _emojiRegex!.hasMatch(text);
}
```

### 4. üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–µ–π
- –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- üêå –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —ç–º–æ–¥–∑–∏: ~50-100ms
- üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã: ~10-20ms
- üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: –í—ã—Å–æ–∫–æ–µ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ TextStyle –æ–±—ä–µ–∫—Ç—ã)
- üé® –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–∞: –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ (–∑–∞–º–µ—Ç–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞)

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚ö° –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —ç–º–æ–¥–∑–∏: ~1-5ms (–∏–∑ –∫—ç—à–∞)
- üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã: ~0.1-1ms
- üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤)
- üé® –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–∞: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–µ–∑–∞–º–µ—Ç–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —ç–º–æ–¥–∑–∏
  EmojiUtils.preloadEmojis();
  
  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–∞
  await EmojiLoaderService.preloadAppleEmojiFont();
  
  runApp(MyApp());
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:
```dart
// –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —ç–º–æ–¥–∑–∏
String emoji = EmojiUtils.getCommonEmoji('smile'); // üòä

// –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å
TextStyle style = EmojiUtils.getEmojiTextStyle(fontSize: 20);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç–º–æ–¥–∑–∏
bool hasEmoji = EmojiUtils.hasEmoji(text);
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```dart
// –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—ç—à–µ
Map<String, int> cacheInfo = EmojiUtils.getCacheInfo();

// –°—Ç–∞—Ç—É—Å —à—Ä–∏—Ñ—Ç–∞
Map<String, dynamic> fontStatus = EmojiLoaderService.getStatus();

// –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
EmojiUtils.clearCache();
```

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:
1. **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞:** –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ `preloadEmojis()` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
2. **–†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã (12, 14, 16, 18, 20, 24) –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ –≤ production
4. **–û—á–∏—Å—Ç–∫–∞:** –û—á–∏—â–∞–π—Ç–µ –∫—ç—à –ø—Ä–∏ —Å–º–µ–Ω–µ –ª–æ–∫–∞–ª–∏ –∏–ª–∏ —Ç–µ–º—ã

### ‚ùå –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:
1. –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —à—Ä–∏—Ñ—Ç–æ–≤
2. –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ —Ü–≤–µ—Ç–Ω—ã–º–∏ —ç–º–æ–¥–∑–∏ (–æ–Ω–∏ –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è)
3. –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫—ç—à–∞:
```dart
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
static const int MAX_CACHE_SIZE = 1000;

// –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
if (_emojiCache.length > MAX_CACHE_SIZE) {
  _clearOldestEntries();
}
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **Lazy loading:** –ó–∞–≥—Ä—É–∑–∫–∞ —ç–º–æ–¥–∑–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
2. **Compression:** –°–∂–∞—Ç–∏–µ —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
3. **Preloading strategy:** –£–º–Ω–∞—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π

## üì± –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ Android 5.0+
- ‚úÖ iOS 11.0+
- ‚úÖ Web (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —à—Ä–∏—Ñ—Ç–æ–≤)
- ‚úÖ Desktop platforms

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å Apple Emoji:
- **–°–∫–æ—Ä–æ—Å—Ç—å:** –î–æ 50x –±—ã—Å—Ç—Ä–µ–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π
- **–ü–∞–º—è—Ç—å:** –°–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –Ω–∞ 60-80%
- **UX:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–º–æ–¥–∑–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
